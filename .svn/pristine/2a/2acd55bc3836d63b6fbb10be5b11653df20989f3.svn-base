<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="stylesheet" type="text/css" href="../../../static/h-ui/css/H-ui.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../static/h-ui.admin/css/H-ui.admin.css" />
    <link rel="stylesheet" type="text/css" href="../../../lib/Hui-iconfont/1.0.8/iconfont.css" />
    <link rel="stylesheet" type="text/css" href="../../../static/h-ui.admin/skin/default/skin.css" id="skin" />
    <link rel="stylesheet" type="text/css" href="../../../static/h-ui.admin/css/style.css" />
    <link rel="stylesheet" href="../../../lib/zTree/v3/css/bootstrapStyle/bootstrapStyle.css">
    <title></title>
</head>

<body>
    <div id="treeDemo" class="ztree" style="padding-top:50px;width:400px;padding-left:50px;float:left;"> </div>
    <div id="ztreeMessage" class="" style="width:600px; float:left;padding-top:50px; min-height:200px; overflow:hidden"> </div>

    <script type="text/javascript" src="../../../lib/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="../../../lib/layer/2.4/layer.js"></script>
    <script type="text/javascript" src="../../../static/h-ui/js/H-ui.js"></script>
    <script src="../../../lib/zTree/v3/js/js/jquery.ztree.all.js" charset="utf-8"></script>
    <script src="../../../lib/zTree/v3/js/js/jquery.ztree.core.js" charset="utf-8"></script>
    <script src="../../../lib/zTree/v3/js/js/jquery.ztree.excheck.js" charset="utf-8"></script>
    <script src="../../../lib/zTree/v3/js/js/jquery.ztree.exedit.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../js/util.js"></script>
    <!-- 模板 -->
    <script type="text/javascript" src="../../js/common.js"></script>
    <!-- <script src="../../js/system/resourceMange.js" charset="utf-8"></script> -->
    <script>
    
    $(document).ready(function() {
            var resource_data = null;
  
            var _this = this;
            getAjax('resource/list', {
                page: 1,
                size: 100
            }, function(data) {
                if (data.code == 0) {
                    resource_data = data.dataInfo;
                   render(resource_data);
                }
            })

             var newCount = 1;
              function addHoverDom (treeId, treeNode) {
                 console.log(treeNode)
                var sObj = $("#" + treeNode.tId + "_span");
                if (treeNode.editNameFlag || $("#addBtn_"+treeNode.tId).length>0) return;
                var addStr = "<span class='button add' id='addBtn_" + treeNode.tId
                    + "' title='add node' onfocus='this.blur();'></span>";
                sObj.after(addStr);
                var btn = $("#addBtn_"+treeNode.tId);

                if (btn) {
                    $("#"+treeNode.tId+"_a").mouseenter(function(){
                             btn.show()
                        })
                        $("#"+treeNode.tId+"_a").mouseleave(function(){
                             btn.hide()
                        })
                        btn.bind("click", function(){
                        var zTree = $.fn.zTree.getZTreeObj("treeDemo");
                        zTree.addNodes(treeNode, {id:(100 + newCount), pId:treeNode.id, name:"new node" + (newCount++)});
                        return false;
                    });

                }
            };
             function removeHoverDom(treeId, treeNode) {
                

            }
      function render(data) {
            

            
            var setting = {
                view: {
                    addHoverDom: addHoverDom,
                    removeHoverDom: removeHoverDom,
                    selectedMulti: true
                },
                check: {
                    enable: true
                },
                data: {
                    simpleData: {
                        enable: true
                    }
                },
                edit: {
                    enable: true
                }
            };
            var vNodes = data;
            var treeObj= $.fn.zTree.init($("#treeDemo"), setting, vNodes);

             treeObj.expandAll(true);
            // if (data) {
            //     var meun_first = data.map(function(item, key) {
            //         return '<li class="navbar-levelone "><a href="javascript:;">' + item.name + '</a></li>'
            //     }).join("")
            //     // $("#navbar-navs").html(meun_first)
            // }

        }
    
 
})
    </script>
</body>

</html>
